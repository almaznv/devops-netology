## [Домашнее задание к занятию "11.03 Микросервисы: подходы"](https://github.com/netology-code/devkub-homeworks/blob/main/11-microservices-03-approaches.md)
## 

1. [Задача 1: Обеспечить разработку](https://github.com/netology-code/devkub-homeworks/blob/main/11-microservices-03-approaches.md#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-1-%D0%BE%D0%B1%D0%B5%D1%81%D0%BF%D0%B5%D1%87%D0%B8%D1%82%D1%8C-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D1%83)

**Вопрос:**

Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

Облачная система;
Система контроля версий Git;
Репозиторий на каждый сервис;
Запуск сборки по событию из системы контроля версий;
Запуск сборки по кнопке с указанием параметров;
Возможность привязать настройки к каждой сборке;
Возможность создания шаблонов для различных конфигураций сборок;
Возможность безопасного хранения секретных данных: пароли, ключи доступа;
Несколько конфигураций для сборки из одного репозитория;
Кастомные шаги при сборке;
Собственные докер образы для сборки проектов;
Возможность развернуть агентов сборки на собственных серверах;
Возможность параллельного запуска нескольких сборок;
Возможность параллельного запуска тестов;
Обоснуйте свой выбор.

**Ответ:**

AWS наиболее подходящая платформа для решения всех этих задач. Т.к. имеют в своем ассортименте наиболее полный стек технологий подходящий по требованиям, ну и сооотвественно наиболее интегрированный между сервисами.    
* Для хранения кода AWS CodeCommit  
* Запуск сборки с помощью AWS Pipeline можно запускать различными триггерами, push в репозиторий, по расписанию, по запросу API и т.д   
* Кнопку с указанием паратом, скорее всего надо будет реализовать на serverless технологиях AWS lambda, по сути нужно написать интерфейс (html+js) с кнопкой, который запросит параметры и  выполнит post запрос к AWS Pipeline  
* К каждой сборке можно прицепить свой набор variables.  
* Есть возможность создания шаблонов конфигураций. Также есть небольшой набор уже готовых от AWS  
* Артефакты сборки сохраняются в S3  
* AWS Secrets Manager для хранения секретов  
* Кастомизация процесса борки и шагов за счет напсиания своего конфига AWS Pipeline
* Агент CodeDeploy может устанавливаться на on-premise
* AWS Pipeline Поодерживает паралельные сборки, и также выполнение парарлельных шагов в сборке (указанием одинакового runOrder).
* Amazon Elastic Container Registry - для хранения собсвтенных докер образов , и также много уже готовых.

2. [Задача 2: Логи](https://github.com/netology-code/devkub-homeworks/blob/main/11-microservices-03-approaches.md#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-2-%D0%BB%D0%BE%D0%B3%D0%B8)

**Вопрос:**  

Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

Сбор логов в центральное хранилище со всех хостов обслуживающих систему;
Минимальные требования к приложениям, сбор логов из stdout;
Гарантированная доставка логов до центрального хранилища;
Обеспечение поиска и фильтрации по записям логов;
Обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
Возможность дать ссылку на сохраненный поиск по записям логов;
Обоснуйте свой выбор.

**Ответ:**  

Для сбора логов я бы выбрал стек Vector + Elastic/s3 + Kibana

Vector сделан на Rust, потребляет мало ресурсов, при это может и собирать логи и отравлять в различные сервисы. Просто настраивается

Vector, один конфиг для сбора логов из stdout, преобразования, отправка во вторйо Vector  
Vector, второй конфиг для отпарвки в S3 (для долгосрочного хранения логов) и для отправки в Elastic для оперативного наблюдения (до 3 месяцев)  

Kibana для поиска информации по логах, создания дашбордов и графиков, предоставление доступа разработчикам. Возможность дать ссылку также есть 

  