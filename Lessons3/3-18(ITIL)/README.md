## [Домашнее задание к занятию "10.06. Инцидент-менеджмент"](https://github.com/netology-code/mnt-homeworks/tree/master/10-monitoring-06-incident-management)
## 

Постмортем по результатам сбоя системы Github в 2018 году

|   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|---|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание инцидента  | В 22.52 UTC 21.10.2018 нарушилась связь между датацентрами, что привело к развалу кластера рассинхронизации данных между ними. Недоступность сервиса 24 часа 11 минут                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Предшествующие события  | Производились плановые профилактические работы по замене вышедшего из строя оптического оборудования 100G                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Воздействие  | С момента обнаружения и во время проведения работы работали не все сервисы. В течение большей части инцидента GitHub также не мог обслуживать события webhook, создавать и публиковать сайты GitHub Pages. Также наблюдалась медленная скорость работы приложения                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Обнаружение  | Через две минуты от начала проблемы, внутренние системы мониторинга начали генерировать предупреждения, указывающие на то, что  системы Github испытывают многочисленные сбои. Инженеры подключились к изучению и сортировке  уведомлений. В 23.09 присвоили желтый статус, эскалировали ситуацию на координатора. Координатор в свою очередь перевел статус в красный, что означало фактическую неработоспособность части сервисов                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Реакция  | Были привлечены дополнительные инженеры для восстановления работоспособности. Решение инцидента до полного восстановления заняло 24 часа 11 минут                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Восстановление  | Был выбран приоритет целостности данных над удобством и временем восстановления. Было принято решение сделать бекпы текущего состояния баз данных. План заключался в восстановлении из резервных копий, синхронизации реплик на обоих сайтах, возврате к стабильной топологии обслуживания, а затем возобновлении обработки заданий в очереди<br/> Т.к. резервные копии  располагались на удлаенном облаки, и размер баз измерялся в террабайтах. Основное время на восстановление  ушло на загрузку и последующее восстановление из бекапа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Таймлайн  | 22.54 Многочисленные алерты в системе мониторинга<br/> 23.07  группа реагирования решила вручную заблокировать наш внутренний инструментарий развертывания, чтобы предотвратить внесение дополнительных изменений. Статус переведен в желтый. <br/> 23.09 Статус переведен в красный<br/>23.13 Поиск и принятие решения по стратегии восстановления <br/>00.41 Запущены прцоессы резервного копирования все кластеров MySQL<br/>06.51 Несколько кластеров завершили восстановление и запустили синхронизацию с репликами. Наблюдалось замедление загрузки сайта. <br/>  Gihub опубликовал сообщение в блоге с извинениями и статусом процесса. <br/> 11.12 Все первичные базы восстановлены. Сайт стал более отзывычивым. Синхронизация с репликами продолжается <br/>13.15 Пиковая нагрузка<br/> 16.24 Аварийное переключение на исходную топологию. Начали обрабатывать накопившиееся данные<br/> 16.45 Включили веб хуки, обработали накопившиееся данные. Вернулись к нормальной производительности.<br/> 23.03 Все ожидаемые веб-хуки и сборки Pages были обработаны, а целостность и надлежащее функционирование всех систем подтверждены. Статус сайта был обновлен до зеленого. |
| Последующие действия  | 1. Работа над целостностью данных. <br/> 2. Работа над временными оценками восстановления выносимую на публику. <br/> 3. Множество технических улучшений для предотвращений ситуации в дальнейшем. 4. Внедрение практик проверки сценариев сбоя.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
